var a,e,f;function g(b){return"string"==typeof b?document.getElementById(b):b}function h(){var b=g("asm");if(b&&(b=b.value)){g("out").value="";var c=l();c.open("POST","compile.php");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.onreadystatechange=function(){4==c.readyState&&(window.console&&console.log(c.responseText),eval(c.responseText))};c.send("asm="+encodeURIComponent(b))}}function n(b){return 32>b||127<=b?".":String.fromCharCode(b)}
function p(b){return b.toString(2).padStart(8,"0")}function q(b){return b.toString(10).padStart(3," ")}function t(b){return b.toString(16).padStart(2,"0")}function u(b){return b.toString(16).padStart(4,"0")}function v(){var b=g("ex");if(!(0>b.value)){var c=l();c.open("GET","load_ex.php?v="+b.value);c.onreadystatechange=function(){4==c.readyState&&eval("SS"+c.responseText)};c.send()}}function y(){a.s=1;a.l=65532;a.l=z();a.m=256;a.h=0;a.i=0;a.j=0;a.g=32}function A(b){a.s=0;SO(["HALT:"+b])}
function B(b){0<=a.m?(a.m--,C((a.m&255)+256,b)):A("stack full: "+a.m)}function D(){if(256>a.m){var b=E((a.m&255)+256);a.m++;return b}A("stack empty");return a.s=0}function F(){a.o++;return 255&E(a.l++)}function z(){return F()+(F()<<8)}function G(b,c){a.memory[b]=c&255}function H(b){return b in a.memory?a.memory[b]:A("GLOBAL(cpu6502).memory location $"+u(b)+" unavailable")}function C(b,c){b&=65535;c&=255;for(var d in f){var k=f[d];if(k.A&&"x"!==k.A(b,c))return}G(b,c)}
function E(b){b&=65535;for(var c in f){var d=f[c];if(d.N&&(d=d.N(b),"x"!==d))return d}return H(b)}function J(b){127<b?a.l=a.l-(256-b):a.l+=b}function K(b,c){var d=255<b+c;"undefined"!=typeof d&&(a.g=d?a.g|1:a.g&-2);c=b-c;b=0==c;"undefined"!=typeof b&&(a.g=b?a.g|2:a.g&-3);c&=128;"undefined"!=typeof c&&(a.g=c?a.g|128:a.g&-129)}
function L(b){if(a.g&8){var c=15+(a.h&15)-(b&15)+(a.g&1);if(16>c){var d=0;c-=6}else d=16,c-=16;d+=240+(a.h&240)-(b&240);256>d?(a.g&=254,a.g&191&&128>d&&(a.g&=191),d-=96):(a.g|=1,a.g&191&&384<=d&&(a.g&=191));d+=c}else d=255+a.h-b+(a.g&1),256>d?(a.g&=254,a.g&191&&128>d&&(a.g&=191)):(a.g|=1,a.g&191&&384<=d&&(a.g&=191));a.h=d&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127}
function M(b){a.g=(a.h^b)&128?a.g&191:a.g|64;if(a.g&8){var c=(a.h&15)+(b&15)+(a.g&1);10<=c&&(c=16|c+6&15);c+=(a.h&240)+(b&240);160<=c?(a.g|=1,a.g&191&&384<=c&&(a.g&=191),c+=96):(a.g&=254,a.g&191&&128>c&&(a.g&=191))}else c=a.h+b+(a.g&1),256<=c?(a.g|=1,a.g&191&&384<=c&&(a.g&=191)):(a.g&=254,a.g&191&&128>c&&(a.g&=191));a.h=c&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127}
function N(b){function c(r){r=r||window.event;r.preventDefault();k=w-r.clientX;m=x-r.clientY;w=r.clientX;x=r.clientY;b.style.top=b.offsetTop-m+"px";b.style.left=b.offsetLeft-k+"px"}function d(){document.onmouseup=null;document.onmousemove=null}var k=0,m=0,w=0,x=0;b.onmousedown=function(r){r=r||window.event;r.preventDefault();w=r.clientX;x=r.clientY;document.onmouseup=d;document.onmousemove=c}}
function O(){e={};R(0);var b=0;setInterval(function(){b+=e.S;var c=Math.floor(b/100);if(!(1>c)){b-=100*c;for(var d=0;d<c;d++)if(a.s){var k=F();if(k in P)P[k]();else a.s=0,SO(["HALT - unknown opcode $"+t(k)+" @ $"+u(a.l)])}}},10)}
function Q(){g("assembla").addEventListener("click",h);g("ex").addEventListener("change",v);setInterval(function(){var b=255&a.h,c=255&a.i,d=255&a.j;g("cy").value=a.o;g("PC").value="$"+u(a.l);g("A").value="$"+t(b)+" "+n(b)+" "+q(b)+" %"+p(b);g("X").value="$"+t(c)+" "+n(c)+" "+q(c)+" %"+p(c);g("Y").value="$"+t(d)+" "+n(d)+" "+q(d)+" %"+p(d);f.O.show()},33)}
I=function(b){var c=[];b=atob(b);for(var d=0;d<b.length;d++)c[d]=b.charCodeAt(d);window.console&&console.log(c.join(" "));R(0);f.O.clear();a.s=0;a.memory=c;y()};function S(){function b(){var k=g("ln");if(d!=c.scrollHeight){d=c.scrollHeight;for(var m=c.scrollHeight/20,w=[],x=1;x<m;x++)w.push(x);k.innerHTML=w.join("\n")}k.scrollTop=c.scrollTop}var c=g("asm"),d=-1;c.onscroll=b;b()}
function l(){try{return new XMLHttpRequest}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}throw Error("XMLHttpRequest non disponibile");}
onload=function(){f={};S();T();a={memory:[]};for(var b=0;65535>=b;b++)a.memory[b]=0;a.o=0;a.s=0;a.l=0;a.m=0;a.h=0;a.i=0;a.j=0;a.g=0;y();if(!f)throw g("body").innerHTML="<div style=background:red;color:white;padding:5px;font-weight:bold>errore fatale:<br>!GLOBAL(plugins)</div>","fatal";U();V();W();X();Y();O();Q()};
var P=[function(){a.s=0},function(){var b=F()+a.i;b=E(b)+(E(b+1)<<8);a.h|=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=F();a.h|=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=F(),c=E(b);a.g=a.g&254|c>>7&1;c<<=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){B(a.g)},function(){a.h|=F();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.g=a.g&254|a.h>>7&1;a.h=a.h<<1;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},
,,function(){a.h|=E(z());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=z(),c=E(b);a.g=a.g&254|c>>7&1;c<<=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=F();0==(a.g&128)&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;a.h|=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=F()+a.i&255;a.h|=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=F()+a.i&255,c=E(b);a.g=a.g&254|c>>7&1;c<<=1;C(b,c);a.g=c?a.g&
253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g&=254},function(){var b=z()+a.j;a.h|=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=z()+a.i;a.h|=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=z()+a.i,c=E(b);a.g=a.g&254|c>>7&1;c<<=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=z(),c=a.l-1;B(c>>8&255);B(c&255);a.l=b},function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&
127},,,function(){var b=F();b=E(b);a.g=b&a.h?a.g&253:a.g|2;a.g=a.g&63|b&192},function(){var b=F();a.h&=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g&128:a.g&127},function(){var b=a.g&1,c=F(),d=E(c);a.g=a.g&254|d>>7&1;d=d<<1|b;C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.g=D()|32},function(){a.h&=F();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1;a.g=a.g&254|a.h>>7&1;a.h=a.h<<1;a.h|=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){var b=
E(z());a.g=b&a.h?a.g&253:a.g|2;a.g=a.g&63|b&192},function(){var b=E(z());a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1,c=z(),d=E(c);a.g=a.g&254|d>>7&1;d=d<<1|b;C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){var b=F();a.g&128&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;a.h&=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=F();b=E(b)+(E(b+1)<<8)+a.i;a.h&=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=
a.g&1,c=F()+a.i&255,d=E(c);a.g=a.g&254|d>>7&1;d=d<<1|b;C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.g|=1},function(){var b=z()+a.j;b=E(b);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=z()+a.i;b=E(b);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1,c=z()+a.i,d=E(c);a.g=a.g&254|d>>7&1;d=d<<1|b;C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){},function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);a.h^=
E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=F()+a.i&255;b=E(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=F()&255,c=E(b);a.g=a.g&254|c&1;c>>=1;C(b,c);a.g=0!=c?a.g&253:a.g|2;a.g=128==(c&128)?a.g|128:a.g&127},,function(){B(a.h)},function(){a.h^=F();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.g=a.g&254|a.h&1;a.h=a.h>>1;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){a.l=z()},function(){var b=z();b=E(b);
a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=z(),c=E(b);a.g=a.g&254|c&1;c>>=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=F();0==(a.g&64)&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;a.h^=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=F()+a.i&255;a.h^=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=F()+a.i&255,c=E(b);a.g=a.g&254|c&1;c>>=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:
a.g&127},,function(){},function(){var b=z()+a.j;b=E(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=z()+a.i;b=E(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=z()+a.i,c=E(b);a.g=a.g&254|c&1;c>>=1;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.l=D()+1|D()<<8},function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);b=E(b);M(b)},,,,function(){var b=F();b=E(b);M(b)},function(){var b=a.g&1,c=F(),d=E(c);a.g=a.g&254|d&1;d>>=1;b&&
(d|=128);C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.h=D();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=F();M(b)},function(){var b=a.g&1;a.g=a.g&254|a.h&1;a.h=a.h>>1;b&&(a.h|=128);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){},function(){var b=z();b=E(b);M(b)},function(){var b=a.g&1,c=z(),d=E(c);a.g=a.g&254|d&1;d>>=1;b&&(d|=128);C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){var b=F();a.g&64&&J(b)},function(){var b=
F();b=E(b)+(E(b+1)<<8);b=E(b+a.j);M(b)},,,,function(){var b=F()+a.i&255;b=E(b);a.g=a.g&254|b&1;M(b)},function(){var b=a.g&1,c=F()+a.i&255,d=E(c);a.g=a.g&254|d&1;d>>=1;b&&(d|=128);C(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){},function(){var b=z();b=E(b+a.j);M(b)},,,,function(){var b=z();b=E(b+a.i);M(b)},function(){var b=z()+a.i,c=E(b);a.g=a.g&254|c&1;(c>>=1)&&(c|=128);C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,,function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);C(b,a.h)},
,,function(){C(F(),a.j)},function(){C(F(),a.h)},function(){C(F(),a.i)},,function(){a.j=a.j-1&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},,function(){a.h=a.i&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){C(z(),a.j)},function(){C(z(),a.h)},function(){C(z(),a.i)},,function(){var b=F();0==(a.g&1)&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;C(b,a.h)},,,function(){C(F()+a.i,a.j)},function(){C(F()+a.i,a.h)},function(){C(F()+a.j,a.i)},,function(){a.h=a.j&255;a.g=a.h?
a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){C(z()+a.j,a.h)},function(){a.m=a.i&255},,,function(){C(z()+a.i,a.h)},,,function(){a.j=F();a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);a.h=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=F();a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=E(F());a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=E(F());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?
a.g|128:a.g&127},function(){a.i=E(F());a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=a.h&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=F();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=a.h&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=E(z());a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=E(z());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=E(z());a.g=a.i?a.g&253:a.g|2;a.g=
a.i&128?a.g|128:a.g&127},,function(){var b=F();a.g&1&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;a.h=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,function(){a.j=E(F()+a.i);a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=E(F()+a.i&255);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=E(F()+a.j);a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.g&=191},function(){var b=z()+a.j;a.h=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&
127},function(){a.i=a.m&255},,function(){var b=z()+a.i;a.j=E(b);a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=z()+a.i;a.h=E(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=z()+a.j;a.i=E(b);a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){var b=F();a.g=255<a.j+b?a.g|1:a.g&254;b=a.j-b;a.g=b?a.g&253:a.g|2;a.g=b&128?a.g|128:a.g&127},function(){var b=F();b=E(b)+(E(b+1)<<8)+a.j;b=E(b);K(a.h,b)},,,function(){var b=E(F());K(a.j,b)},function(){var b=
E(F());K(a.h,b)},function(){var b=F(),c=E(b);--c;C(b,c&255);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.j=a.j+1&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=F();K(a.h,b)},function(){a.i=a.i-1&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){var b=E(z());K(a.j,b)},function(){var b=E(z());K(a.h,b)},function(){var b=z(),c=E(b);--c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=F();0==(a.g&2)&&J(b)},function(){var b=
F();b=E(b)+(E(b+1)<<8)+a.j;b=E(b);K(a.h,b)},,,,function(){var b=E(F()+a.i);K(a.h,b)},function(){var b=F()+a.i,c=E(b);--c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g&=247},function(){var b=z()+a.j;b=E(b);K(a.h,b)},,,,function(){var b=z()+a.i;b=E(b);K(a.h,b)},function(){var b=z()+a.i,c=E(b);--c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=F();K(a.i,b)},function(){var b=F()+a.i&255;b=E(b)+(E(b+1)<<8);b=E(b);L(b)},,,function(){var b=E(F());
K(a.i,b)},function(){var b=F();b=E(b);L(b)},function(){var b=F(),c=E(b);++c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.i=a.i+1&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},function(){var b=F();L(b)},function(){},,function(){var b=E(z());K(a.i,b)},function(){var b=z();b=E(b);L(b)},function(){var b=z(),c=E(b);++c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=F();a.g&2&&J(b)},function(){var b=F();b=E(b)+(E(b+1)<<8);b=E(b+a.j);
L(b)},,,,function(){var b=F()+a.i&255;b=E(b);a.g=a.g&254|b&1;L(b)},function(){var b=F()+a.i,c=E(b);++c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g|=8},function(){var b=z();b=E(b+a.j);L(b)},,,,function(){var b=z();b=E(b+a.i);L(b)},function(){var b=z()+a.i,c=E(b);++c;c&=255;C(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127}];
function W(){var b={A:function(k,m){k-=b.K;if(0>k||255<k)return"x";switch(k){case 0:return b.D=m;case 1:b.F=m;f.display.T(b.D,b.F,b.C);return;case 2:return b.C[0]=m;case 3:return b.C[1]=m;case 4:return b.C[2]=m;case 5:return b.M=m;case 6:b.F=m,0<b.M-b.D&&(b.context.fillStyle="rgb("+b.C.join(",")+")",b.context.fillRect(b.D*b.p,b.F*b.p,b.p*(b.M-b.D),b.p)),b.F++}return 0},T:function(k,m,w){b.context.fillStyle="rgb("+w.join(",")+")";b.context.fillRect(k*b.p,m*b.p,b.p,b.p)},K:33024,v:[256,192],p:2,C:[0,
0,0]},c=document.createElement("canvas");c.width=b.v[0]*b.p;c.height=b.v[1]*b.p;b.context=c.getContext("2d");var d=g("peri_display");d.style.width=c.width+"px";d.style.height=c.height+"px";d.appendChild(c);N(g("peri_display_outer"));f.display=b}
function X(){var b={A:function(c,d){c-=b.L;if(0>c||255<c)return"x";switch(c){case 255:window.console&&console.log("peri_MAC cmd/sts "+d);d&128&&(b.c=0);d&=-129;window.console&&console.log("peri_MAC cmd/sts "+d);b.c+=b.a*b.b;switch(d){case 1:b.u=a.o+16;break;case 2:b.u=a.o+24;break;case 3:b.u=a.o+32;break;case 4:b.u=a.o+32}window.console&&console.log("peri_MAC.deadline = "+b.u);break;case 0:return b.a=d;case 1:return b.a+=d<<8;case 2:return b.a+=d<<16;case 3:return b.a+=d<<24;case 16:return b.b=d;
case 17:return b.b+=d<<8;case 18:return b.b+=d<<16;case 19:return b.b+=d<<24;case 32:return b.c=d;case 33:return b.c+=d<<8;case 34:return b.c+=d<<16;case 35:return b.c+=d<<24;case 36:return b.c+=d<<32;case 37:return b.c+=d<<40;case 38:return b.c+=d<<58;case 39:return b.c+=d<<56}return 0},N:function(c){var d=c-b.L;if(0>d||255<d)return"x";window.console&&console.log("peri_MAC working "+(a.o<b.u));if(a.o<b.u)return G(b.L+255,0);window.console&&console.log("peri_MAC.c "+b.c);switch(c&255){case 0:return G(c,
b.a>>0);case 1:return G(c,b.a>>8);case 2:return G(c,b.a>>16);case 3:return G(c,b.a>>24);case 16:return G(c,b.b>>0);case 17:return G(c,b.b>>8);case 18:return G(c,b.b>>16);case 19:return G(c,b.b>>24);case 32:return G(c,b.c>>0);case 33:return G(c,b.c>>8);case 34:return G(c,b.c>>16);case 35:return G(c,b.c>>24);case 36:return G(c,b.c>>32);case 37:return G(c,b.c>>40);case 38:return G(c,b.c>>48);case 39:return G(c,b.c>>56);case 255:return G(c,255)}return 0},L:33280,a:0,b:0,c:0,u:0};f.U=b}
function U(){var b={A:function(c){c in b.G||(b.G[c]=0);b.G[c]++;return"x"},clear:function(){b.G=[];b.show()},show:function(){var c=[];for(d in b.G){var d=65535&d;var k=H(d),m=(H(d+1)<<8)+k;c.push("$"+u(d)+" → $"+t(k)+" %"+p(k)+" "+n(k)+" "+q(k)+" "+m.toString(10).padStart(5," "))}g("mem_wr_hgram").value=c.join("\n")}};b.clear();f.O=b}function V(){f.V={A:function(b,c){if(4096!=b)return"x";g("out").value+=String.fromCharCode(c);Z();return 0}}}
function Y(){var b={A:function(k,m){k-=b.K;if(0>k||255<k)return"x";switch(k){case 0:b.exec(m);break;case 2:b.H[0]=m;break;case 3:b.H[1]=m;break;case 4:b.J[0]=m;break;case 5:b.J[1]=m}return 0},exec:function(k){switch(k){case 0:b.clear();break;case 1:b.move();break;case 2:b.line()}},clear:function(){b.context.fillStyle="rgb(0,10,5)";b.context.fillRect(0,0,b.v[0],b.v[1])},P:function(){return[2*(b.H[1]<<8|b.H[0]<<0)/65536-1,-(2*(b.J[1]<<8|b.J[0]<<0)/65536-1)]},move:function(){b.B=b.P()},line:function(){b.context.strokeStyle=
"rgb(0,255,50)";b.context.beginPath();b.context.moveTo(b.B[0],b.B[1]);b.B=b.P();b.context.lineTo(b.B[0],b.B[1]);b.context.stroke()},K:33280,v:[400,300],B:[0,0],H:[0,0],J:[0,0]},c=document.createElement("canvas");c.width=b.v[0];c.height=b.v[1];b.context=c.getContext("2d");var d=g("peri_tek");d.style.width=c.width+"px";d.style.height=c.height+"px";d.appendChild(c);b.clear();N(g("peri_tek_outer"));f.W=b}R=function(b){e.S=b};function Z(){var b=g("out");b.scrollTop=b.scrollHeight}
SO=function(b){g("out").value+=b.join("\n")+"\n";Z()};SS=function(b){g("asm").value=b};function T(){function b(d){if(9==d.keyCode){d.preventDefault&&d.preventDefault();var k=d.selectionStart;d.value=d.value.substring(0,k)+"  "+d.value.substring(d.selectionEnd);d.selectionStart=d.selectionEnd=k+2;return!1}}var c=g("asm");c.addEventListener?c.addEventListener("keydown",b,!1):c.attachEvent&&c.attachEvent("onkeydown",b)};
