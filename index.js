var a,e,f;function g(b){return"string"==typeof b?document.getElementById(b):b}function k(){var b=g("asm");if(b&&(b=b.value)){g("out").value="";var c=m();c.open("POST","compile.php");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.onreadystatechange=function(){4==c.readyState&&eval(c.responseText)};c.send("asm="+encodeURIComponent(b))}}function n(b){return 32>b||127<=b?".":String.fromCharCode(b)}function p(b){return b.toString(2).padStart(8,"0")}
function q(b){return b.toString(10).padStart(3," ")}function t(b){return b.toString(16).padStart(2,"0")}function u(b){return b.toString(16).padStart(4,"0")}function v(){a.s=1;a.l=65532;a.l=y();a.m=256;a.h=0;a.i=0;a.j=0;a.g=32}function z(b){a.s=0;SO(["HALT:"+b])}function A(b){0<=a.m?(a.m--,B((a.m&255)+256,b)):z("stack full: "+a.m)}function C(){if(256>a.m){var b=D((a.m&255)+256);a.m++;return b}z("stack empty");return a.s=0}function E(){a.u++;return 255&D(a.l++)}function y(){return E()+(E()<<8)}
function F(b,c){a.memory[b]=c&255}function G(b){return b in a.memory?a.memory[b]:z("GLOBAL(cpu6502).memory location $"+u(b)+" unavailable")}function B(b,c){b&=65535;c&=255;for(var d in f){var h=f[d];if(h.v&&"x"!==h.v(b,c))return}F(b,c)}function D(b){b&=65535;for(var c in f){var d=f[c];if(d.N&&(d=d.N(b),"x"!==d))return d}return G(b)}function H(b){127<b?a.l=a.l-(256-b):a.l+=b}
function J(b,c){var d=255<b+c;"undefined"!=typeof d&&(a.g=d?a.g|1:a.g&-2);c=b-c;b=0==c;"undefined"!=typeof b&&(a.g=b?a.g|2:a.g&-3);c&=128;"undefined"!=typeof c&&(a.g=c?a.g|128:a.g&-129)}
function K(b){if(a.g&8){var c=15+(a.h&15)-(b&15)+(a.g&1);if(16>c){var d=0;c-=6}else d=16,c-=16;d+=240+(a.h&240)-(b&240);256>d?(a.g&=254,a.g&191&&128>d&&(a.g&=191),d-=96):(a.g|=1,a.g&191&&384<=d&&(a.g&=191));d+=c}else d=255+a.h-b+(a.g&1),256>d?(a.g&=254,a.g&191&&128>d&&(a.g&=191)):(a.g|=1,a.g&191&&384<=d&&(a.g&=191));a.h=d&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127}
function L(b){a.g=(a.h^b)&128?a.g&191:a.g|64;if(a.g&8){var c=(a.h&15)+(b&15)+(a.g&1);10<=c&&(c=16|c+6&15);c+=(a.h&240)+(b&240);160<=c?(a.g|=1,a.g&191&&384<=c&&(a.g&=191),c+=96):(a.g&=254,a.g&191&&128>c&&(a.g&=191))}else c=a.h+b+(a.g&1),256<=c?(a.g|=1,a.g&191&&384<=c&&(a.g&=191)):(a.g&=254,a.g&191&&128>c&&(a.g&=191));a.h=c&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127}
function M(b){function c(r){r=r||window.event;r.preventDefault();h=w-r.clientX;l=x-r.clientY;w=r.clientX;x=r.clientY;b.style.top=b.offsetTop-l+"px";b.style.left=b.offsetLeft-h+"px"}function d(){document.onmouseup=null;document.onmousemove=null}var h=0,l=0,w=0,x=0;b.onmousedown=function(r){r=r||window.event;r.preventDefault();w=r.clientX;x=r.clientY;document.onmouseup=d;document.onmousemove=c}}
function N(){e={};R(0);var b=0;setInterval(function(){b+=e.S;var c=Math.floor(b/100);if(!(1>c)){b-=100*c;for(var d=0;d<c;d++)if(a.s){var h=E();if(h in O)O[h]();else a.s=0,SO(["HALT - unknown opcode $"+t(h)+" @ $"+u(a.l)])}}},10)}
function P(){g("assembla").addEventListener("click",k);g("ex").addEventListener("change",Q);setInterval(function(){var b=255&a.h,c=255&a.i,d=255&a.j;g("cy").value=a.u;g("PC").value="$"+u(a.l);g("A").value="$"+t(b)+" "+n(b)+" "+q(b)+" %"+p(b);g("X").value="$"+t(c)+" "+n(c)+" "+q(c)+" %"+p(c);g("Y").value="$"+t(d)+" "+n(d)+" "+q(d)+" %"+p(d);f.O.show()},33)}I=function(b){var c=[];b=atob(b);for(var d=0;d<b.length;d++)c[d]=b.charCodeAt(d);R(0);f.O.clear();a.s=0;a.memory=c;v()};
function S(){function b(){var h=g("ln");if(d!=c.scrollHeight){d=c.scrollHeight;for(var l=c.scrollHeight/20,w=[],x=1;x<l;x++)w.push(x);h.innerHTML=w.join("\n")}h.scrollTop=c.scrollTop}var c=g("asm"),d=-1;c.onscroll=b;b()}function Q(){var b=g("ex");if(!(0>b.value)){var c=m();c.open("GET","load_ex.php?v="+b.value);c.onreadystatechange=function(){4==c.readyState&&eval("SS"+c.responseText)};c.send()}}
function m(){try{return new XMLHttpRequest}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}throw Error("XMLHttpRequest non disponibile");}
onload=function(){f={};S();T();a={memory:[]};for(var b=0;65535>=b;b++)a.memory[b]=0;a.u=0;a.s=0;a.l=0;a.m=0;a.h=0;a.i=0;a.j=0;a.g=0;v();if(!f)throw g("body").innerHTML="<div style=background:red;color:white;padding:5px;font-weight:bold>errore fatale:<br>!GLOBAL(plugins)</div>","fatal";U();V();W();X();Y();N();P()};
var O=[function(){a.s=0},function(){var b=E()+a.i;b=D(b)+(D(b+1)<<8);a.h|=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=E();a.h|=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=E(),c=D(b);a.g=a.g&254|c>>7&1;c<<=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){A(a.g)},function(){a.h|=E();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.g=a.g&254|a.h>>7&1;a.h=a.h<<1;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},
,,function(){a.h|=D(y());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=y(),c=D(b);a.g=a.g&254|c>>7&1;c<<=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=E();0==(a.g&128)&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;a.h|=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=E()+a.i&255;a.h|=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=E()+a.i&255,c=D(b);a.g=a.g&254|c>>7&1;c<<=1;B(b,c);a.g=c?a.g&
253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g&=254},function(){var b=y()+a.j;a.h|=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=y()+a.i;a.h|=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=y()+a.i,c=D(b);a.g=a.g&254|c>>7&1;c<<=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=y(),c=a.l-1;A(c>>8&255);A(c&255);a.l=b},function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&
127},,,function(){var b=E();b=D(b);a.g=b&a.h?a.g&253:a.g|2;a.g=a.g&63|b&192},function(){var b=E();a.h&=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g&128:a.g&127},function(){var b=a.g&1,c=E(),d=D(c);a.g=a.g&254|d>>7&1;d=d<<1|b;B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.g=C()|32},function(){a.h&=E();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1;a.g=a.g&254|a.h>>7&1;a.h=a.h<<1;a.h|=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){var b=
D(y());a.g=b&a.h?a.g&253:a.g|2;a.g=a.g&63|b&192},function(){var b=D(y());a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1,c=y(),d=D(c);a.g=a.g&254|d>>7&1;d=d<<1|b;B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){var b=E();a.g&128&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;a.h&=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=E();b=D(b)+(D(b+1)<<8)+a.i;a.h&=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=
a.g&1,c=E()+a.i&255,d=D(c);a.g=a.g&254|d>>7&1;d=d<<1|b;B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.g|=1},function(){var b=y()+a.j;b=D(b);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=y()+a.i;b=D(b);a.h&=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=a.g&1,c=y()+a.i,d=D(c);a.g=a.g&254|d>>7&1;d=d<<1|b;B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){},function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);a.h^=
D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=E()+a.i&255;b=D(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=E()&255,c=D(b);a.g=a.g&254|c&1;c>>=1;B(b,c);a.g=0!=c?a.g&253:a.g|2;a.g=128==(c&128)?a.g|128:a.g&127},,function(){A(a.h)},function(){a.h^=E();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.g=a.g&254|a.h&1;a.h=a.h>>1;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){a.l=y()},function(){var b=y();b=D(b);
a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=y(),c=D(b);a.g=a.g&254|c&1;c>>=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=E();0==(a.g&64)&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;a.h^=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=E()+a.i&255;a.h^=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=E()+a.i&255,c=D(b);a.g=a.g&254|c&1;c>>=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:
a.g&127},,function(){},function(){var b=y()+a.j;b=D(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,,function(){var b=y()+a.i;b=D(b);a.h^=b;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=y()+a.i,c=D(b);a.g=a.g&254|c&1;c>>=1;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.l=C()+1|C()<<8},function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);b=D(b);L(b)},,,,function(){var b=E();b=D(b);L(b)},function(){var b=a.g&1,c=E(),d=D(c);a.g=a.g&254|d&1;d>>=1;b&&
(d|=128);B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){a.h=C();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=E();L(b)},function(){var b=a.g&1;a.g=a.g&254|a.h&1;a.h=a.h>>1;b&&(a.h|=128);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){},function(){var b=y();b=D(b);L(b)},function(){var b=a.g&1,c=y(),d=D(c);a.g=a.g&254|d&1;d>>=1;b&&(d|=128);B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){var b=E();a.g&64&&H(b)},function(){var b=
E();b=D(b)+(D(b+1)<<8);b=D(b+a.j);L(b)},,,,function(){var b=E()+a.i&255;b=D(b);a.g=a.g&254|b&1;L(b)},function(){var b=a.g&1,c=E()+a.i&255,d=D(c);a.g=a.g&254|d&1;d>>=1;b&&(d|=128);B(c,d);a.g=d?a.g&253:a.g|2;a.g=d&128?a.g|128:a.g&127},,function(){},function(){var b=y();b=D(b+a.j);L(b)},,,,function(){var b=y();b=D(b+a.i);L(b)},function(){var b=y()+a.i,c=D(b);a.g=a.g&254|c&1;(c>>=1)&&(c|=128);B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,,function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);B(b,a.h)},
,,function(){B(E(),a.j)},function(){B(E(),a.h)},function(){B(E(),a.i)},,function(){a.j=a.j-1&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},,function(){a.h=a.i&255;a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,function(){B(y(),a.j)},function(){B(y(),a.h)},function(){B(y(),a.i)},,function(){var b=E();0==(a.g&1)&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;B(b,a.h)},,,function(){B(E()+a.i,a.j)},function(){B(E()+a.i,a.h)},function(){B(E()+a.j,a.i)},,function(){a.h=a.j&255;a.g=a.h?
a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){B(y()+a.j,a.h)},function(){a.m=a.i&255},,,function(){B(y()+a.i,a.h)},,,function(){a.j=E();a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);a.h=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=E();a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=D(E());a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=D(E());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?
a.g|128:a.g&127},function(){a.i=D(E());a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=a.h&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=E();a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=a.h&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.j=D(y());a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=D(y());a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=D(y());a.g=a.i?a.g&253:a.g|2;a.g=
a.i&128?a.g|128:a.g&127},,function(){var b=E();a.g&1&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;a.h=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},,,function(){a.j=D(E()+a.i);a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){a.h=D(E()+a.i&255);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){a.i=D(E()+a.j);a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){a.g&=191},function(){var b=y()+a.j;a.h=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&
127},function(){a.i=a.m&255},,function(){var b=y()+a.i;a.j=D(b);a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=y()+a.i;a.h=D(b);a.g=a.h?a.g&253:a.g|2;a.g=a.h&128?a.g|128:a.g&127},function(){var b=y()+a.j;a.i=D(b);a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){var b=E();a.g=255<a.j+b?a.g|1:a.g&254;b=a.j-b;a.g=b?a.g&253:a.g|2;a.g=b&128?a.g|128:a.g&127},function(){var b=E();b=D(b)+(D(b+1)<<8)+a.j;b=D(b);J(a.h,b)},,,function(){var b=D(E());J(a.j,b)},function(){var b=
D(E());J(a.h,b)},function(){var b=E(),c=D(b);--c;B(b,c&255);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.j=a.j+1&255;a.g=a.j?a.g&253:a.g|2;a.g=a.j&128?a.g|128:a.g&127},function(){var b=E();J(a.h,b)},function(){a.i=a.i-1&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},,function(){var b=D(y());J(a.j,b)},function(){var b=D(y());J(a.h,b)},function(){var b=y(),c=D(b);--c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=E();0==(a.g&2)&&H(b)},function(){var b=
E();b=D(b)+(D(b+1)<<8)+a.j;b=D(b);J(a.h,b)},,,,function(){var b=D(E()+a.i);J(a.h,b)},function(){var b=E()+a.i,c=D(b);--c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g&=247},function(){var b=y()+a.j;b=D(b);J(a.h,b)},,,,function(){var b=y()+a.i;b=D(b);J(a.h,b)},function(){var b=y()+a.i,c=D(b);--c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=E();J(a.i,b)},function(){var b=E()+a.i&255;b=D(b)+(D(b+1)<<8);b=D(b);K(b)},,,function(){var b=D(E());
J(a.i,b)},function(){var b=E();b=D(b);K(b)},function(){var b=E(),c=D(b);++c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.i=a.i+1&255;a.g=a.i?a.g&253:a.g|2;a.g=a.i&128?a.g|128:a.g&127},function(){var b=E();K(b)},function(){},,function(){var b=D(y());J(a.i,b)},function(){var b=y();b=D(b);K(b)},function(){var b=y(),c=D(b);++c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){var b=E();a.g&2&&H(b)},function(){var b=E();b=D(b)+(D(b+1)<<8);b=D(b+a.j);
K(b)},,,,function(){var b=E()+a.i&255;b=D(b);a.g=a.g&254|b&1;K(b)},function(){var b=E()+a.i,c=D(b);++c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127},,function(){a.g|=8},function(){var b=y();b=D(b+a.j);K(b)},,,,function(){var b=y();b=D(b+a.i);K(b)},function(){var b=y()+a.i,c=D(b);++c;c&=255;B(b,c);a.g=c?a.g&253:a.g|2;a.g=c&128?a.g|128:a.g&127}];
function W(){var b={v:function(h,l){h-=b.K;if(0>h||255<h)return"x";switch(h){case 0:return b.D=l;case 1:b.F=l;f.display.U(b.D,b.F,b.C);return;case 2:return b.C[0]=l;case 3:return b.C[1]=l;case 4:return b.C[2]=l;case 5:return b.M=l;case 6:b.F=l,0<b.M-b.D&&(b.context.fillStyle="rgb("+b.C.join(",")+")",b.context.fillRect(b.D*b.p,b.F*b.p,b.p*(b.M-b.D),b.p)),b.F++}return 0},U:function(h,l,w){b.context.fillStyle="rgb("+w.join(",")+")";b.context.fillRect(h*b.p,l*b.p,b.p,b.p)},K:33024,o:[256,192],p:2,C:[0,
0,0]},c=document.createElement("canvas");c.width=b.o[0]*b.p;c.height=b.o[1]*b.p;b.context=c.getContext("2d");var d=g("peri_display");d.style.width=c.width+"px";d.style.height=c.height+"px";d.appendChild(c);M(g("peri_display_outer"));f.display=b}
function X(){var b={v:function(c,d){c-=b.L;if(0>c||255<c)return"x";switch(c){case 255:d&128&&(b.c=0);b.c+=b.a*b.b;switch(d&-129){case 1:b.B=a.u+16;break;case 2:b.B=a.u+24;break;case 3:b.B=a.u+32;break;case 4:b.B=a.u+32}break;case 0:return b.a=d;case 1:return b.a+=d<<8;case 2:return b.a+=d<<16;case 3:return b.a+=d<<24;case 16:return b.b=d;case 17:return b.b+=d<<8;case 18:return b.b+=d<<16;case 19:return b.b+=d<<24;case 32:return b.c=d;case 33:return b.c+=d<<8;case 34:return b.c+=d<<16;case 35:return b.c+=
d<<24;case 36:return b.c+=d<<32;case 37:return b.c+=d<<40;case 38:return b.c+=d<<58;case 39:return b.c+=d<<56}return 0},N:function(c){var d=c-b.L;if(0>d||255<d)return"x";if(a.u<b.B)return F(b.L+255,0);switch(c&255){case 0:return F(c,b.a>>0);case 1:return F(c,b.a>>8);case 2:return F(c,b.a>>16);case 3:return F(c,b.a>>24);case 16:return F(c,b.b>>0);case 17:return F(c,b.b>>8);case 18:return F(c,b.b>>16);case 19:return F(c,b.b>>24);case 32:return F(c,b.c>>0);case 33:return F(c,b.c>>8);case 34:return F(c,
b.c>>16);case 35:return F(c,b.c>>24);case 36:return F(c,b.c>>32);case 37:return F(c,b.c>>40);case 38:return F(c,b.c>>48);case 39:return F(c,b.c>>56);case 255:return F(c,255)}return 0},L:33280,a:0,b:0,c:0,B:0};f.W=b}
function U(){var b={v:function(c){c in b.G||(b.G[c]=0);b.G[c]++;return"x"},clear:function(){b.G=[];b.show()},show:function(){var c=[];for(d in b.G){var d=65535&d;var h=G(d),l=(G(d+1)<<8)+h;c.push("$"+u(d)+" → $"+t(h)+" %"+p(h)+" "+n(h)+" "+q(h)+" "+l.toString(10).padStart(5," "))}g("mem_wr_hgram").value=c.join("\n")}};b.clear();f.O=b}function V(){f.X={v:function(b,c){if(4096!=b)return"x";g("out").value+=String.fromCharCode(c);Z();return 0}}}
function Y(){var b={v:function(h,l){h-=b.K;if(0>h||255<h)return"x";switch(h){case 0:b.exec(l);break;case 2:b.H[0]=l;break;case 3:b.H[1]=l;break;case 4:b.J[0]=l;break;case 5:b.J[1]=l}return 0},exec:function(h){switch(h){case 0:b.clear();break;case 1:b.A=b.P();break;case 2:b.T(b.P())}},clear:function(){b.context.reset();b.context.fillStyle="rgb(0,40,20)";b.context.fillRect(0,0,b.o[0],b.o[1]);b.context.strokeStyle="rgb(0,255,100)";b.context.lineWidth=1.5;b.context.translate(b.o[0]/2,b.o[1]/2)},V:function(){return[2*
(b.H[1]<<8|b.H[0]<<0)/65536-1,-(2*(b.J[1]<<8|b.J[0]<<0)/65536-1)]},P:function(){var h=b.V(),l=b.o[1]/2;return[h[0]*l,h[1]*l]},T:function(h){b.context.beginPath();b.context.moveTo(b.A[0],b.A[1]);b.A=h;b.context.lineTo(b.A[0],b.A[1]);b.context.stroke()},K:33792,o:[400,300],A:[0,0],H:[0,0],J:[0,0]},c=document.createElement("canvas");c.width=b.o[0];c.height=b.o[1];b.context=c.getContext("2d");var d=g("peri_tek");d.style.width=c.width+"px";d.style.height=c.height+"px";d.appendChild(c);M(g("peri_tek_outer"));
b.clear();f.Y=b}R=function(b){e.S=b};function Z(){var b=g("out");b.scrollTop=b.scrollHeight}SO=function(b){g("out").value+=b.join("\n")+"\n";Z()};SS=function(b){g("asm").value=b};
function T(){function b(d){if(9==d.keyCode){d.preventDefault&&d.preventDefault();var h=d.selectionStart;d.value=d.value.substring(0,h)+"  "+d.value.substring(d.selectionEnd);d.selectionStart=d.selectionEnd=h+2;return!1}}var c=g("asm");c.addEventListener?c.addEventListener("keydown",b,!1):c.attachEvent&&c.attachEvent("onkeydown",b)};
